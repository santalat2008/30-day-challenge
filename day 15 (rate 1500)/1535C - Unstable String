import sys
input=sys.stdin.read
d=iter(input().split())
t=int(next(d))
o=[]
for _ in range(t):
    s=next(d)
    n=len(s)
    ans=0
    l0=l1=0
    for i,ch in enumerate(s):
        if ch=='?':
            l0+=1
            l1+=1
        else:
            if (i%2)^int(ch):
                l0+=1
            else:
                l0=0
            if ((i+1)%2)^int(ch):
                l1+=1
            else:
                l1=0
        ans+=max(l0,l1)
    o.append(str(ans))
print("\n".join(o))
