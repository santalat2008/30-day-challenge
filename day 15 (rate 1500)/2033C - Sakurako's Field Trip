t=int(input())
for _ in range(t):
    n=int(input())
    a=list(map(int,input().split()))
    if all(a[i]!=a[i+1] for i in range(n-1)):
        print(0)
        continue
    l=0
    while l<n-1 and a[l]!=a[l+1]: l+=1
    r=n-1
    while r>0 and a[r]!=a[r-1]: r-=1
    if l>=r: print(0)
    elif r-l<=2: print(1)
    else: print(r-l-2)
